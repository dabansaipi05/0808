rm(list=ls(all=TRUE))
library(XML)
library(bitops)
library(RCurl)
library(httr)
orgURL = 'http://www.boxofficemojo.com/yearly/chart/?view2=worldwide&yr=2016&p=.htm'
if(urlExists)
{
html = getURL(pttURL, ssl.verifypeer = FALSE)
xml = htmlParse(html, encoding ='utf-8')
font = xpathSApply(xml, "//font[@size=2]/a//@href", xmlValue)
}
alldata = rbind(alldata, tempdata)
}
allDate = levels(alldata$date)
res = hist(as.numeric(alldata$date), nclass=length(allDate), axes=F)
axis(1, at=1:length(allDate), labels=allDate)
axis(2, at=1:max(res$counts), labels=1:max(res$counts))
write.csv(alldata,"alldata.csv")
library("bitops", lib.loc="~/R/win-library/3.1")
detach("package:bitops", unload=TRUE)
library("bitops", lib.loc="~/R/win-library/3.1")
library("RCurl", lib.loc="~/R/win-library/3.1")
install.packages(c("bitops", "RCurl", "httr", "XML"))
write.csv(alldata,"alldata.csv")
rm(list=ls(all=TRUE))
library(XML)
library(bitops)
library(RCurl)
library(httr)
orgURL = 'http://www.boxofficemojo.com/yearly/'
startPage = 500
endPage = 600
alldata = data.frame()
for( i in startPage:endPage)
{
pttURL <- paste(orgURL, i, '.html', sep='')
urlExists = url.exists(pttURL)
if(urlExists)
{
html = getURL(pttURL, ssl.verifypeer = FALSE)
xml = htmlParse(html, encoding ='utf-8')
font= xpathSApply(xml, "//font[@size="4"]/a//@href", xmlValue)
tempdata = data.frame(font)
}
alldata = rbind(alldata, tempdata)
}
allDate = levels(alldata$date)
res = hist(as.numeric(alldata$date), nclass=length(allDate), axes=F)
axis(1, at=1:length(allDate), labels=allDate)
axis(2, at=1:max(res$counts), labels=1:max(res$counts))
write.csv(alldata,"alldata.csv")
rm(list=ls(all=TRUE))
library(XML)
library(bitops)
library(RCurl)
library(httr)
orgURL = 'http://www.boxofficemojo.com/yearly/'
startPage = 1
endPage = 1
alldata = data.frame()
for( i in startPage:endPage)
{
pttURL <- paste(orgURL, sep='')
urlExists = url.exists(pttURL)
if(urlExists)
{
html = getURL(pttURL, ssl.verifypeer = FALSE)
xml = htmlParse(html, encoding ='utf-8')
title = xpathSApply(xml, "//font[@size='4']/a//@href", xmlValue)        #author = xpathSApply(xml, "//div[@class='author']", xmlValue)
#path = xpathSApply(xml, "//div[@class='title']/a//@href")
#date = xpathSApply(xml, "//div[@class='date']", xmlValue)
#response = xpathSApply(xml, "//div[@class='nrec']", xmlValue)
tempdata = data.frame(title)
}
alldata = rbind(alldata, tempdata)
}
allDate = levels(alldata$date)
#res = hist(as.numeric(alldata$date), nclass=length(allDate), axes=F)
#axis(1, at=1:length(allDate), labels=allDate)
#axis(2, at=1:max(res$counts), labels=1:max(res$counts))
write.csv(alldata,"alldata.csv")
install.packages("XML")
library("XML", lib.loc="~/R/win-library/3.1")
